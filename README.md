# Информационная система космической станции

[EN version](README_EN.md)

> Модульное приложение на Kotlin/Spring Boot для управления производством, хранением и торговлей ресурсами на космической станции

## Технологии

- Kotlin 2.3.0
- Spring Boot 4.0.1, Spring Modulith, Spring Web, Spring Data JPA, Spring Security + JWT
- PostgreSQL, Flyway

## Масштаб

- 19 таблиц базы данных
- 62 эндпоинта
- 9 компонентных модулей

## Ссылки

- [Wiki](https://github.com/killreal777/is-project/wiki)
- [Swagger UI](https://killreal777.github.io/is-project/api/api-docs.html)
- [Схема базы данных](https://github.com/killreal777/is-project/wiki/Database-Schema-RU)
- [Документация модулей](https://killreal777.github.io/is-project/modulith/all-docs.html)

## Предметная область

Предметная область представляет собой космическую станцию. Назначение станции – производство, хранение и торговля ресурсами.

Станция состоит из модулей трёх типов:
- **Производственные модули** — преобразуют одни ресурсы в другие через производственные циклы
- **Складские модули** — хранят ресурсы с контролем вместимости
- **Стыковочные модули** — предоставляют посадочные места для кораблей разных размеров

Модули строятся из предопределённых чертежей. Станция может расширяться путём строительства новых модулей.

Система поддерживает 4 пользовательские роли:
- **Владелец** — полное управление станцией и финансами
- **Менеджер** — управление модулями и торговлей
- **Инженер** — управление производством
- **Пилот** — торговля ресурсами со станцией

**Масштаб системы:** 9 модулей, 19 таблиц БД, 62 API эндпоинта

## Архитектура

Модульный монолит с явными границами модулей через Spring Modulith.

**Компонентные модули станции:**
- **`production`** — производственные модули с управлением циклами (Off, Ready, Manufacturing)
- **`storage`** — складские модули с управлением вместимостью и хранением ресурсов
- **`dock`** — стыковочные модули с распределением посадочных мест по размерам кораблей

**Другие модули:**
- **`trade`** — торговая система: торговые политики, предложения, исполнение сделок
- **`security`** — аутентификация через JWT, авторизация на основе ролей
- **`shared`** — общие компоненты и абстракции

**Общие модули (подмодули shared):**
- **`common`** — базовые сущности, мапперы, утилиты, конфигурация
- **`module`** — абстракции модулей станции и чертежей
- **`resource`** — управление ресурсами станции
- **`user`** — пользователи, роли, счета, корабли

**[Документация модулей](https://killreal777.github.io/is-project/modulith/all-docs.html)**

## Локальный запуск

### Вариант 1: Инфраструктура в Docker, приложение локально

**Требования:** JDK 21, Docker

```bash
# Запуск PostgreSQL и миграций
docker-compose up

# Запуск приложения
./gradlew bootRun
```

### Вариант 2: Всё в Docker

**Требования:** Docker

```bash
docker-compose -f docker-compose-app.yml up
```

### Локальный доступ к приложению

- [Swagger UI](http://localhost:8080/swagger-ui.html)
- [Логи](./logs)
